<app-card class="card">
  <form [formGroup]="userForm" (ngSubmit)="submit()">
    <app-form-field>
      <input placeholder="Username" formControlName="username">
      <app-error *ngIf="userForm.get('username').touched && userForm.get('username').hasError('required')">
        Username is <strong>required</strong>
      </app-error>
      <app-error *ngIf="userForm.get('username').touched && userForm.get('username').hasError('minlength')">
        Username must be at least <strong>3</strong> charachters
      </app-error>
    </app-form-field>
    <app-form-field>
      <input formControlName="password" placeholder="Enter your password" [type]="hide ? 'password' : 'text'">
      <app-error *ngIf="userForm.get('password').touched && userForm.get('password').hasError('required')">
        Password is <strong>required</strong>
      </app-error>
      <app-error *ngIf="userForm.get('password').touched && userForm.get('password').hasError('minlength')">
        Password must be at least <strong>3</strong> charachters
      </app-error>
    </app-form-field>
    <app-form-field >
      <input placeholder="Name" formControlName="name">
      <app-error *ngIf="userForm.get('name').touched && userForm.get('name').hasError('required')">
        Name is <strong>required</strong>
      </app-error>
      <app-error *ngIf="userForm.get('name').touched && userForm.get('name').hasError('minlength')">
          Name must be at least <strong>2</strong>
        </app-error>
    </app-form-field>
    <app-form-field>
      <input placeholder="Surname" formControlName="surname">
      <app-error *ngIf="userForm.get('surname').touched && userForm.get('surname').hasError('required')">
        Surname is <strong>required</strong>
      </app-error>
      <app-error *ngIf="userForm.get('surname').touched && userForm.get('surname').hasError('minlength')">
        Surname must be at least <strong>2</strong> charachters
      </app-error>
    </app-form-field>
    <app-form-field>
      <input  placeholder="Email" type="email" formControlName="email">
      <app-error *ngIf="userForm.get('email').touched && userForm.get('email').hasError('required')">
        Email is <strong>required</strong>
      </app-error>
      <app-error *ngIf="userForm.get('email').touched && userForm.get('email').hasError('email')">
        Wrong email format
      </app-error>
    </app-form-field>
    <app-form-field>
      <input  placeholder="Year of birth"
              type="number"
              formControlName="yearOfBirth">
      <app-error *ngIf="userForm.get('yearOfBirth').touched && userForm.get('yearOfBirth').hasError('required')">
        Year of birth is <strong>required</strong>
      </app-error>
    </app-form-field>
    <app-form-field>
      <label>Employed at</label>
      <select  formControlName="companyId">
        <option [value]="company.id" *ngFor="let company of companyData">{{ company.name }}</option>
      </select>
      <app-error *ngIf="userForm.get('companyId').touched && userForm.get('companyId').hasError('required')">
        User must have a <strong>company</strong>
      </app-error>
    </app-form-field>
    <button type="submit" class="btn primary">Register user</button>
    <app-error class="error-form" *ngIf="formError">{{ formError }}</app-error>
</form>
</app-card>


<table *ngIf="companyData">
    <tr>  <th>ID</th>  <th>Company name</th>  </tr>
    <tr *ngFor="let elem of companyData">
      <td>{{ elem.id }}</td>
      <td>{{ elem.name }}</td>
    </tr>
</table>

<table *ngIf="userData">
    <tr>  <th>User ID</th>  <th>Username</th> <th>Password</th> <th>Name</th> <th>Surname</th> <th>E-mail</th>  <th>YOB</th> <th>Employed at</th> </tr>
    <tr *ngFor="let elem of userData">
        <td>{{ elem.userId }}</td>
        <td>{{ elem.username }}</td>
        <td class="password">{{ elem.password }}</td>
        <td>{{ elem.name }}</td>
        <td>{{ elem.surname }}</td>
        <td>{{ elem.email }}</td>
        <td>{{ elem.yearOfBirth }}</td>
        <td>{{ elem.companyName }}</td>
      </tr>
</table>